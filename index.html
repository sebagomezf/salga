<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>SALGA</title>
    <link rel="stylesheet" href="css/bootstrap-reboot.min.css">
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <link rel="stylesheet" href="css/datepicker.css">
    <link rel="stylesheet" href="css/bootstrap-multiselect.css">
    <link href="https://fonts.googleapis.com/css?family=Cardo|Montserrat&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.5.1/dist/leaflet.css"
    
    integrity="sha512-xwE/Az9zrjBIphAcBb3F6JVqxf46+CDLwfLMHloNu6KEQCAWi6HcDUbeOfBIptF7tcCzusKFjFw2yuvEpDL9wQ=="
    crossorigin=""/>
    <link rel="stylesheet" href="https://unpkg.com/leaflet-routing-machine@latest/dist/leaflet-routing-machine.css" />
    <link rel="stylesheet" href="css/icofont.css">
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <section class="home">
        <div class="home-title">
            <h1 class="home-title__title">Proyecto <strong>Salga</strong></h1>
            <p class="home-title__lead">Se abrirán las grandes Alamedas</p>
        </div>
        <div class="overlay"></div>
    </section>
    
    <section class="project">
        <div class="container">
            <div class="row">
                <div class="col-12 col-md-6">
                    <h2 class="project-title">El Proyecto</h2>
                    <p class="section-text mt-3">Las formas de ejercer la ciudadanía han ido cambiando, sobretodo en los últimos años, y el estado no ha entendido estas nuevas formas de representación simbólicas en el espacio urbano. La contención de fuerzas especiales en las movilizaciones se transformaron en un acto normalizado y no una acción de última instancia; con ello ha emergido un juego de poder desbalanceado. La información sobre contención de carabineros en las movilizaciones está disgregada y es poco legible para la ciudadanía, existiendo una veladura en el modo de intervención de carabineros.</p>
                    <p class="section-text">SALGA describe y dispone de manera abierta el modo de intervención de carabineros según diferentes tipos de marcha desarrolladas en la Región Metropolitana. Esta plataforma ofrece una mirada informada a la ciudadanía sobre los modos de intervención de carabineros según las diferentes demandas ciudadanas que se presentan. SALGA permitirá blindar de conocimiento a la ciudadanía, facilitando la reflexión sobre sus derechos asociados a la expresión en el espacio público.</p>
                </div>
                <div class="col-12 col-md-6 d-flex align-items-center">
                    <img src="img/img-01.png" class="img-fluid" alt="">
                </div>
            </div>
        </div>
    </section>
    
    <section class="data-section py-5">
        
        <div class="container">
            
            <h3 class="select-title text-center mt-0 mb-4">Tipos de Marcha</h3>
            
            <p class="text-center section-lead">Selecciona un rango de fecha y los tipos de marcha.</p>
            
            
            
            <div class="row">
                
                <div class="col-12 col-md-6 offset-md-1"> 
                    <small class="mb-0 section-text">Rango de fecha</small>
                    <div class="d-flex align-items-center flex-wrap">
                        <div class="date-container">
                            <input id="inicio" data-toggle="datepicker" placeholder="Ej. 01/04/2019">
                        </div>
                        <p class="mx-2 mb-0">a</p>
                        <div class="date-container">
                            <input id="inicio" data-toggle="datepicker" placeholder="Ej. 25/07/2019">
                        </div>
                    </div>
                </div>
                
                
                <div class="col-12 col-md-5">
                    <!-- <div class="select">
                        <div class="selectBtn" data-type="firstOption">Tipo de Marcha</div>
                        <div class="selectDropdown">
                            <div class="option" data-type="firstOption">Educación</div>
                        </div>
                    </div> -->
                    
                    
                    <dl class="dropdown"> 
                        <small class="mb-0 section-text">&nbsp;</small>
                        <dt>
                            <a >
                                <span class="hida">Selecciona Tipos de Marcha</span>    
                                <p class="multiSel"></p>  
                            </a>
                        </dt>
                        
                        <dd>
                            <div class="mutliSelect">
                                <ul>
                                    <li>
                                        <input type="checkbox" value="Educación" />&nbsp;Educación</li>
                                        <li>
                                            <input type="checkbox" value="Género/Feminismo" />&nbsp;Género/Feminismo</li>
                                            
                                        </ul>
                                    </div>
                                </dd>
                                
                            </dl>
                            
                            
                        </div> 
                        
                    </div>
                    
                    <div class="row mt-5">
                        <div class="col-12 mt-4 text-center">
                            <a href="#next" id="btn-buscar" onclick="mostrarData()" class="btn btn-outline-primary">Buscar</a>
                        </div>
                    </div>
                </div>
                
            </section>
            
            
            <section id="next" class="resume-data">
                <div id="placeholder-text" class="container">
                    <div class="row my-4">
                        <div class="col-12">
                            <h2 class="text-center my-5">[Selecciona al menos un tipo de Marcha]</h2>
                        </div>
                    </div>
                </div>
                <div id="selected-data" class="container py-3 d-none">
                    <div class="row mt-5 mb-3">
                        
                        <div class="col-12 col-md-6">
                            <h2 class="mt-3 mb-4 data-section__title">Educación</h2>
                            
                            <div class="number-container">
                                <i class="icofont-users data-icon"></i>
                                <div class="number-info">
                                    <h5 class="data-title">15.000</h5>
                                    <small class="data-subtitle">Asistentes Promedio</small>
                                </div>
                            </div>
                            
                            <div class="number-container">
                                <i class="icofont-map-pins data-icon"></i>
                                <div class="number-info">
                                    <h5 class="data-title">Baquedano - República</h5>
                                    <small class="data-subtitle">Lugar de Inicio - Lugar de Termino</small>
                                </div>
                            </div>
                            
                            
                            <div class="number-container">
                                <i class="icofont-handcuff data-icon"></i>
                                <div class="number-info">
                                    <h5 class="data-title">30</h5>
                                    <small class="data-subtitle">Detenidos</small>
                                </div>
                            </div>
                            
                        </div>
                        
                        
                        <div class="col-12 col-md-6">
                            <h2 class="mt-3 mb-4 data-section__title">Género/Feminismo</h2>
                            
                            <div class="number-container">
                                <i class="icofont-users data-icon"></i>
                                <div class="number-info">
                                    <h5 class="data-title">32.000</h5>
                                    <small class="data-subtitle">Asistentes Promedio</small>
                                </div>
                            </div>
                            
                            <div class="number-container">
                                <i class="icofont-map-pins data-icon"></i>
                                <div class="number-info">
                                    <h5 class="data-title">Baquedano - Los Héroes</h5>
                                    <small class="data-subtitle">Lugar de Inicio - Lugar de Termino</small>
                                </div>
                            </div>
                            
                            
                            <div class="number-container">
                                <i class="icofont-handcuff data-icon"></i>
                                <div class="number-info">
                                    <h5 class="data-title">2</h5>
                                    <small class="data-subtitle">Detenidos</small>
                                </div>
                            </div>
                            
                        </div>
                        
                    </div>
                    
                </div>
            </section>
            
            
            
            <section id="detail-data" class="detail-data d-none">
                <div class="container">
                    <div class="row">
                        
                        <div class="col-12 col-md-12 px-0">
                            <h5 class="map-title">Recorrido Promedio</h5>
                            <div id="mapid"></div>
                            <div class="data-colors">
                                <div class="box green"></div>
                                <p class="color-name">Educación</p>
                                <div class="box purple"></div>
                                <p class="color-name">Género/Feminismo</p>
                            </div>
                        </div>
                        <div class="col-12 col-md-12 px-0 ">
                            <div class="details-container">
                                <div id="detalle1" class="d-none">
                                    <div class="col-12 px-0">
                                        <h5 class="data-section__title text-center">Alameda con Vicuña Mackenna</h5>
                                        <div class="row my-5 py-5">
                                            <div class="col-12 col-md-4 offset-md-1 d-flex justify-content-end">
                                                <div class="number-container">
                                                    <i class="icofont-law-protect data-icon"></i>
                                                    <div class="number-info">
                                                        <h5 class="data-title">5</h5>
                                                        <small class="data-subtitle"> Intervenciones de Carabineros</small>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-2 d-flex justify-content-center align-items-center">
                                                <i class="icofont-long-arrow-right detail-arrow"></i>
                                            </div>
                                            <div class="col-12 col-md-4 d-flex align-items-center">
                                                <ul class="data-list">
                                                    <li><span>5</span> Detenidos</li>
                                                </ul>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                
                                
                                <div id="detalle2" class="d-none">
                                    <div class="col-12 px-0">
                                        <h5 class="data-section__title text-center">Alameda con Santa Lucía</h5>
                                        <div class="row my-5 py-5">
                                            <div class="col-12 col-md-4 offset-md-1 d-flex justify-content-end">
                                                <div class="number-container">
                                                    <i class="icofont-law-protect data-icon"></i>
                                                    <div class="number-info">
                                                        <h5 class="data-title">11</h5>
                                                        <small class="data-subtitle"> Intervenciones de Carabineros</small>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-2 d-flex justify-content-center align-items-center">
                                                <i class="icofont-long-arrow-right detail-arrow"></i>
                                            </div>
                                            <div class="col-12 col-md-4">
                                                <ul class="data-list">
                                                    <li><span>2</span> Intervenciones del Carro lanza-agua</li>
                                                    <li><span>1</span> Intervenciones del Carro lanza gases</li>
                                                    <li><span>6</span> Bombas Lacrimógenas</li>
                                                    <li><span>2</span> Detenidos</li>
                                                </ul>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                
                                <div id="detalle3" class="d-none">
                                    <div class="col-12 px-0">
                                        <h5 class="data-section__title text-center">Alameda con Maturana</h5>
                                        <div class="row my-5 py-5">
                                            <div class="col-12 col-md-4 offset-md-1 d-flex justify-content-end">
                                                <div class="number-container">
                                                    <i class="icofont-law-protect data-icon"></i>
                                                    <div class="number-info">
                                                        <h5 class="data-title">29</h5>
                                                        <small class="data-subtitle"> Intervenciones de Carabineros</small>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-2 d-flex justify-content-center align-items-center">
                                                <i class="icofont-long-arrow-right detail-arrow"></i>
                                            </div>
                                            <div class="col-12 col-md-4">
                                                <ul class="data-list">
                                                    <li><span>8</span> Intervenciones del Carro lanza-agua</li>
                                                    <li><span>3</span> Intervenciones del Carro lanza gases</li>
                                                    <li><span>12</span> Bombas Lacrimógenas</li>
                                                    <li><span>6</span> Detenidos</li>
                                                </ul>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                
                                <div id="detalle4" class="d-none">
                                    <div class="col-12 px-0">
                                        <h5 class="data-section__title text-center">Alameda con Nataniel Cox</h5>
                                        <div class="row my-5 py-5">
                                            <div class="col-12 col-md-4 offset-md-1 d-flex justify-content-end">
                                                <div class="number-container">
                                                    <i class="icofont-law-protect data-icon"></i>
                                                    <div class="number-info">
                                                        <h5 class="data-title">8</h5>
                                                        <small class="data-subtitle"> Intervenciones de Carabineros</small>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-2 d-flex justify-content-center align-items-center">
                                                <i class="icofont-long-arrow-right detail-arrow"></i>
                                            </div>
                                            <div class="col-12 col-md-4">
                                                <ul class="data-list">
                                                    <li><span>3</span> Intervenciones del Carro lanza-agua</li>
                                                    <li><span>2</span> Intervenciones del Carro lanza gases</li>
                                                    <li><span>2</span> Bombas Lacrimógenas</li>
                                                    <li><span>1</span> Detenidos</li>
                                                </ul>
                                            </div>
                                        </div>
                                    </div>
                                </div>


                                <div id="detalle5" class="d-none">
                                        <div class="col-12 px-0">
                                            <h5 class="data-section__title text-center">Alameda con Ramón Corvalán</h5>
                                            <div class="row my-5 py-5">
                                                <div class="col-12 col-md-4 offset-md-1 d-flex justify-content-end">
                                                    <div class="number-container">
                                                        <i class="icofont-law-protect data-icon"></i>
                                                        <div class="number-info">
                                                            <h5 class="data-title">2</h5>
                                                            <small class="data-subtitle"> Intervenciones de Carabineros</small>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-md-2 d-flex justify-content-center align-items-center">
                                                    <i class="icofont-long-arrow-right detail-arrow"></i>
                                                </div>
                                                <div class="col-12 col-md-4 d-flex align-items-center">
                                                    <ul class="data-list">
                                                        
                                                        <li><span>2</span> Detenidos</li>
                                                    </ul>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                
                            </div>
                        </div>
                        
                    </div>
                </div>
            </section>
            
            
            <footer class="footer">
                <div class="container">
                    <p class="text-center">- Se Abrirán Las Grandes Alamedas -</p>
                    <p class="text-center">2019</p>
                </div>
            </footer>
            
            <script src="js/jquery.min.js"></script>
            <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
            <script src="js/bootstrap.min.js"></script>
            <script src="js/bootstrap-multiselect.js"></script>
            <script src="js/datepicker.js"></script>
            <script src="js/datepicker.es-ES.js"></script>
            <script src="https://unpkg.com/leaflet@1.5.1/dist/leaflet.js"
            integrity="sha512-GffPMF3RvMeYyc1LWMHtK8EbPv0iNZ8/oTtHPx9/cc2ILxQ+u905qIwdpULaqDkyBKgOaB57QTMg7ztg8Jm2Og=="
            crossorigin=""></script>
            <script src="https://unpkg.com/leaflet-routing-machine@latest/dist/leaflet-routing-machine.js"></script>
            
            <script>
                var select = document.querySelectorAll('.select');
                var index = 1;
                select.forEach(function(e) {
                    e.querySelector('.selectBtn').addEventListener('click', function() {
                        this.nextElementSibling.classList.toggle('toggle');
                        this.nextElementSibling.style.zIndex = index++;
                        this.classList.toggle('toggle');
                    });
                    e.querySelectorAll('.option').forEach(function(b) {
                        b.addEventListener('click', function() {
                            this.parentElement.classList.remove('toggle');
                            this.closest('.select').children[0].classList.remove('toggle');
                            this.closest('.select').children[0].setAttribute('data-type', this.getAttribute('data-type'));
                            this.closest('.select').children[0].innerText = this.innerText;
                        });
                    });
                });
            </script>
            <script>
                
                function mostrarData(){
                    
                    var placeholder =  document.getElementById('placeholder-text');
                    var dataSeleccionada =  document.getElementById('selected-data');
                    var dataDetalle =  document.getElementById('detail-data');
                    
                    placeholder.classList.add('d-none');
                    dataSeleccionada.classList.remove('d-none');
                    dataDetalle.classList.remove('d-none');
                    
                    
                    var mymap = L.map('mapid').setView([-33.442802, -70.646486], 15);  
                    
                    L.tileLayer('https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token=pk.eyJ1IjoibWFwYm94IiwiYSI6ImNpejY4NXVycTA2emYycXBndHRqcmZ3N3gifQ.rJcFIG214AriISLbB6B5aw', {
                        maxZoom: 50,
                        attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, ' +
                        '<a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, ' +
                        'Imagery © <a href="https://www.mapbox.com/">Mapbox</a>',
                        id: 'mapbox.light'
                    }).addTo(mymap);
                    
                    L.circle([-33.437253, -70.635111], 40, {
                        color: '#4caf50',
                        fillColor: '#4caf50',
                        fillOpacity: 0.5
                    }).addTo(mymap).bindPopup('Esquina Alameda con Vicuña Mackenna.<br><a href="#detalle1" onclick="detalleUno()" class="mt-2 popup-link">Ver Detalle</a>');
                    
                    L.circle([-33.437565, -70.636542], 20, {
                        color: '#9c27b0',
                        fillColor: '#9c27b0',
                        fillOpacity: 0.5
                    }).addTo(mymap).bindPopup('Esquina Alameda con Ramón Corvalan.<br><a href="#detalle5" onclick="detalleCinco()" class="mt-2 popup-link">Ver Detalle</a>');
                    
                    
                    
                    L.circle([-33.442089, -70.644144], 100, {
                        color: '#4caf50',
                        fillColor: '#4caf50',
                        fillOpacity: 0.5
                    }).addTo(mymap).bindPopup('Esquina Alameda con Santa Lucia.<br><a href="#detalle2" onclick="detalleDos()" class="mt-2 popup-link">Ver Detalle</a>');
                    
                    
                    L.circle([-33.444698, -70.654208], 80, {
                        color: '#4caf50',
                        fillColor: '#4caf50',
                        fillOpacity: 0.5
                    }).addTo(mymap).bindPopup('Esquina Alameda con Nataniel Cox.<br><a href="#detalle4" onclick="detalleCuatro()" class="mt-2 popup-link">Ver Detalle</a>');
                    
                    
                    L.circle([-33.447319, -70.665764], 180, {
                        color: '#4caf50',
                        fillColor: '#4caf50',
                        fillOpacity: 0.5
                    }).addTo(mymap).bindPopup('Esquina Alameda con Maturana<br><a href="#detalle3" onclick="detalleTres()" class="mt-2 popup-link">Ver Detalle</a>');
                    
                    L.Routing.control({
                        waypoints: [
                        L.latLng(-33.437164, -70.635451),
                        L.latLng(-33.447319, -70.665764)
                        ],
                        lineOptions: {
                            styles: [{color: '#121212', opacity: 0.9, weight: 3}]
                        },
                        createMarker: function() { return null; }
                    }).addTo(mymap);   
                }     
                
                
                
                
                function detalleUno() {
                    
                    var detalle1 =  document.getElementById('detalle1');
                    var detalle2 =  document.getElementById('detalle2');
                    var detalle3 =  document.getElementById('detalle3');
                    var detalle4 =  document.getElementById('detalle4');
                    var detalle5 =  document.getElementById('detalle5');
                    
                    detalle1.classList.remove('d-none');
                    detalle2.classList.add('d-none');
                    detalle3.classList.add('d-none');
                    detalle4.classList.add('d-none');
                    detalle5.classList.add('d-none');
                }
                
                function detalleDos() {
                    
                    var detalle1 =  document.getElementById('detalle1');
                    var detalle2 =  document.getElementById('detalle2');
                    var detalle3 =  document.getElementById('detalle3');
                    var detalle4 =  document.getElementById('detalle4');
                    var detalle5 =  document.getElementById('detalle5');
                    
                    detalle1.classList.add('d-none');
                    detalle2.classList.remove('d-none');
                    detalle3.classList.add('d-none');
                    detalle4.classList.add('d-none');
                    detalle5.classList.add('d-none');
                }
                
                function detalleTres() {
                    
                    var detalle1 =  document.getElementById('detalle1');
                    var detalle2 =  document.getElementById('detalle2');
                    var detalle3 =  document.getElementById('detalle3');
                    var detalle4 =  document.getElementById('detalle4');
                    var detalle5 =  document.getElementById('detalle5');
                    
                    detalle1.classList.add('d-none');
                    detalle2.classList.add('d-none');
                    detalle3.classList.remove('d-none');
                    detalle4.classList.add('d-none');
                    detalle5.classList.add('d-none');
                }

                function detalleCuatro() {
                    
                    var detalle1 =  document.getElementById('detalle1');
                    var detalle2 =  document.getElementById('detalle2');
                    var detalle3 =  document.getElementById('detalle3');
                    var detalle4 =  document.getElementById('detalle4');
                    var detalle5 =  document.getElementById('detalle5');
                    
                    detalle1.classList.add('d-none');
                    detalle2.classList.add('d-none');
                    detalle3.classList.add('d-none');
                    detalle4.classList.remove('d-none');
                    detalle5.classList.add('d-none');
                }

                function detalleCinco() {
                    
                    var detalle1 =  document.getElementById('detalle1');
                    var detalle2 =  document.getElementById('detalle2');
                    var detalle3 =  document.getElementById('detalle3');
                    var detalle4 =  document.getElementById('detalle4');
                    var detalle5 =  document.getElementById('detalle5');
                    
                    detalle1.classList.add('d-none');
                    detalle2.classList.add('d-none');
                    detalle3.classList.add('d-none');
                    detalle4.classList.add('d-none');
                    detalle5.classList.remove('d-none');
                }

            </script>
            <script> 
                $( document ).ready(function() {
                    $('[data-toggle="datepicker"]').datepicker({
                        autoHide: true,
                        language: 'es-ES'
                    });
                    
                    $(".dropdown dt a").on('click', function() {
                        $(".dropdown dd ul").slideToggle('fast');
                    });
                    
                    $(".dropdown dd ul li a").on('click', function() {
                        $(".dropdown dd ul").hide();
                    });
                    
                    function getSelectedValue(id) {
                        return $("#" + id).find("dt a span.value").html();
                    }
                    
                    $(document).bind('click', function(e) {
                        var $clicked = $(e.target);
                        if (!$clicked.parents().hasClass("dropdown")) $(".dropdown dd ul").hide();
                    });
                    
                    $('.mutliSelect input[type="checkbox"]').on('click', function() {
                        
                        var title = $(this).closest('.mutliSelect').find('input[type="checkbox"]').val(),
                        title = $(this).val() + ",";
                        
                        if ($(this).is(':checked')) {
                            var html = '<span title="' + title + '">' + title + '</span>';
                            $('.multiSel').append(html);
                            $(".hida").hide();
                        } else {
                            $('span[title="' + title + '"]').remove();
                            var ret = $(".hida");
                            $('.dropdown dt a').append(ret);
                            
                        }
                    });
                });
            </script>
        </body>
        </html>